<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en" dir="ltr">

<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title>Flip Configuration Guide: Setting up Using gyp</title>
<style>
* {font-family: 'Lucida Grande', Helvetica, Arial, sans-serif; margin: 0; padding: 0; }
body {background-color: #fff; }
p {color: black; font-size: 13px; margin-bottom: 10px;}
h1 {color: black; font-size: 28px; margin-bottom: 32px; padding-top: 24px; font-weight: normal; display: block; }
h2 {color: #3c4c6c; display: block; font-size: 24px; font-weight: normal; margin-bottom: 20px; margin-top: 42px; border-bottom-color: #8391a8; border-bottom-style: solid; border-bottom-width: 1px;}
h3 {color: black; font-size: 19px; margin-bottom: 4px; margin-top: 28px; font-weight: normal; display: block; }
a {color: #36c; text-decoration: none; cursor:pointer; }
a:active {color: #36c; text-decoration: none; cursor:pointer; }
a:hover {color: #36c; text-decoration: underline; cursor:pointer; }
.aerr {color: #f00}
h2 a {color: #3c4c6c; text-decoration: none; cursor:auto; }
h2 a:active {color: #3c4c6c; text-decoration: none; cursor:auto; }
h2 a:hover {color: #3c4c6c; text-decoration: none; cursor:auto; }
h3 a {color: black; text-decoration: none; cursor:auto; }
h3 a:active {color: black; text-decoration: none; cursor:auto; }
h3 a:hover {color: black; text-decoration: none; cursor:auto; }
footer {font-size: 10px; position: fixed; display: block; bottom: 0px; background-color: #f1f5f9; border-top-color: #c7cfd5; border-top-style: solid; border-top-width: 1px; width: 100%; height:22px; padding-top: 7px; padding-left: 7px;}
div {display: block;}
.codeblock {margin-top:17px; margin-bottom:17px; clear: both; display: block; color: #333; }
pre {font-family: Courier, Consolas, monospace; font-size: 12px; height: 14px; line-height: 14px; margin-bottom: 0px; margin-left: 6px; margin-right: 4px; margin-top: -1px;}
small pre {color:#888;}
emph pre {color:#000;}
table {padding-top:5px; padding-bottom:6px; margin-bottom:12px; background-color: #f1f5f9; border-color: #c7cfd5; border-style: solid; border-width: 1px; width: 100%;}
tr {}
td > p {margin-left: 6px; height: 12px;}
.note {margin-top:21px; margin-bottom:22px; padding-left: 8px; padding-right: 8px; background-color: #fff; border-color: #5088c5; border-style: solid; border-width: 1px; display: block;}
.note strong {margin-right: 8px;}
.note p {margin-top: 7px;}
.important {margin-top:21px; margin-bottom:22px; padding-left: 8px; padding-right: 8px; background-color: #f1f5f9; border-color: #5088c5; border-style: solid; border-width: 1px; display: block;}
.important strong {margin-right: 8px;}
.important p {margin-top: 7px;}
.warning {margin-top:21px; margin-bottom:22px; padding-left: 8px; padding-right: 8px; background-color: #f8e3e1; border-color: #c5443e; border-style: solid; border-width: 1px; display: block;}
.warning strong {margin-right: 8px;}
.warning p {margin-top: 7px;}
.caption p {color: black; font-size: 10px; margin-bottom: 10px;}
img {margin-top:10px; margin-bottom:10px;}
ul {margin-left: 17px; margin-bottom: 10px;}
ol {margin-left: 17px; margin-bottom: 10px;}
li {color: black; font-size: 13px; margin-bottom: 7px;}
code {font-family: Courier, Consolas, monospace;}
#content {padding-left: 26px; padding-right: 26px; position: absolute; top: 30px; left: 230px; width: 750px;}
#toc {width: 230px; position: fixed; top: 30px; background-color: #f1f5f9; height: 100%; border-right-color: #c7cfd5; border-right-style: solid; border-right-width: 1px; padding-left: 0px; padding-top: 17px; overflow: auto;}
#toc > ul {list-style-type: none;}
#toc > ul > li {font-size: 11px; }
#toc > ul > li > ul {list-style-type: none; margin-top:8px;}
#toc > ul > li > ul > li {font-size: 11px; }
#toc > p {font-size: 13px; margin-left: 17px;}
.codeblock > p {margin-bottom: 3px; font-size: 11px;}
.codeblock > p > strong {margin-right: 10px; color: #222;}
.nav {font-size: 10px; margin-top: 20px; }
.nav > span {margin-right: 20px;}
.bottomspacer {height:100px;}
#header {width:100%; position: fixed; background-color: #111; height: 30px; z-index: 900;}
#header > p {color:#fff; font-size: 13px; padding-top: 6px; padding-left: 17px; }
#header > p > a {color:#fff; font-size: 13px; text-decoration: none; cursor:pointer; padding-right: 56px;}
.sectioncode {background-color: #f6f6f6; padding: 12px; margin-top: 18px;}
.sectioncode > h3 {margin-top: 0px; padding-bottom: 8px;}
hr { display: block; height: 1px; border: 0; border-top: 1px solid #eee; margin: 28px 0; padding: 0; }</style>
</head>

<body>

<div id="header">
<div style="width: 1006px;"></div>
<p><a href="../index.html">Flip Documentation Library</a><a href="../config/index.html">Flip Configuration Guide</a></p>
</div>
<div id="toc">
<p>Flip Configuration Guide</p>
<ul>
<li><a href="../config/about.html">About Flip Configuration Guide</a></li>
<li><a href="../config/files.html">Files Hierarchy</a></li>
<li><a href="../config/gyp.html">Setting up Using gyp</a>	<ul>
	<li><a href="../config/gyp.html#overview">Overview</a></li>
	<li><a href="../config/gyp.html#top">Top Level Files</a></li>
	<li><a href="../config/gyp.html#src">src Files</a></li>
	<li><a href="../config/gyp.html#test">test Files</a></li>
	<li><a href="../config/gyp.html#headermap">Troubleshooting XCode header inclusion</a></li>
	</ul>
</li>
<li><a href="../config/manual.html">Setting up Manually</a></li>
<li><a href="../config/dll.html">Using Flip as a Dynamic Linked Library (DLL)</a></li>
<li><a href="../config/misc.html">Miscellaneous Configuration</a></li>
<li><a href="../config/msvc.html">MSVC Warnings Notes</a></li>
</ul>
</div>

<div id="content">
<div class="nav" align="right">
<a href="files.html">previous</a><span>&nbsp;</span><a href="manual.html">next</a></div>

<h1>Setting up Using <code>gyp</code></h1>

<p>This chapter explains how to set up your build environment using the <code>gyp</code> tool.</p>

<h2><a name="overview">Overview</a></h2>

<p><code>gyp</code>, "Generate your project" is a tool made by Google which was made for the Chromium project their Google Chrome application. The tool allows to have a set of files in editable text format that can be used to generate automatically Windows Visual Studio or Apple XCode project.</p>

<p>This tool is used by the Flip framework in two ways :</p>

<ul>
<li>To provide a convenient way to make IDE projects for automatic testing</li>
<li>To allow Flip user developer to quickly setup all needed files to    integrate the Flip framework into their build environment</li>
</ul>

<p><code>gyp</code> requires a proper installation of the <code>python</code> programming language to work.</p>

<p>The <code>gyp</code> system documentation is outside of the scope of this guide. More information on the <code>gyp</code> tool is available <a href="http://chromium.googlesource.com/external/gyp/+/master/docs/UserDocumentation.md">here</a>.</p>

<div class="codeblock"><table>
<tr><td><pre>configure.py</pre></td></tr>
<tr><td><pre>flip.gyp</pre></td></tr>
<tr><td><pre>flip_lib.gpyi</pre></td></tr>
<tr><td><pre>flip_src.gpyi</pre></td></tr>
<tr><td><pre>src/</pre></td></tr>
<tr><td><pre>   src.gpyi</pre></td></tr>
<tr><td><pre>test/</pre></td></tr>
<tr><td><pre>   test.gypi</pre></td></tr>
<tr><td><pre>   win.gypi</pre></td></tr>
<tr><td><pre>   xcode.gypi</pre></td></tr>
</table></div>

<p>The following section will describe the purpose of every <code>gyp</code> and <code>gypi</code> file.</p>

<h2><a name="top">Top Level Files</a></h2>

<h3><a name="top-configure"><code>configure.py</code></a></h3>

<p>While not a <code>gyp</code> file, <code>configure.py</code> is a <code>python</code> file used to produce projects for regression and performance testing. It requires an installation of <code>python</code> 2.7 or greater.</p>

<p>Executing this <code>python</code> script will create a <code>projects</code> folder at the top level and will put all required files to build and run tests.</p>

<h3><a name="top-flip.gyp"><code>flip.gyp</code></a></h3>

<p><code>flip.gyp</code> is a top level <code>gyp</code> file that produces all the test targets to test the Flip framework.</p>

<h3><a name="top-flip_lib.gypi"><code>flip_lib.gypi</code></a></h3>

<p><code>flip_lib.gypi</code> is a top level <code>gypi</code> file. When integrating the Flip framework to your build system, this is typically the only file to include.</p>

<p>It will add all source and header files to integrate the Flip framework core and contribution files. It will also set up the include path and makes sure that every dependent target have their include path correctly setup.</p>

<div class="important"><p><strong>Important:</strong> If including this file to your build system generate errors for XCode, please make sure to read the <a href="../config/gyp.html#headermap">Troubleshooting XCode header inclusion</a></p></div>

<h3><a name="top-flip_src.gypi"><code>flip_src.gypi</code></a></h3>

<p><code>flip_src.gypi</code> is a top level <code>gypi</code> file. In contains only all source and header files and set up include path accordingly.</p>

<div class="important"><p><strong>Important:</strong> If including this file to your build system generate errors for XCode, please make sure to read the <a href="../config/gyp.html#headermap">Troubleshooting XCode header inclusion</a></p></div>

<h2><a name="src"><code>src</code> Files</a></h2>

<h3><a name="src-src.gypi"><code>src.gypi</code></a></h3>

<p><code>src/src.gypi</code> contains only the source and header files of the Flip framework core and contribution.</p>

<div class="important"><p><strong>Important:</strong> If including this file to your build system generate errors for XCode, please make sure to read the <a href="../config/gyp.html#headermap">Troubleshooting XCode header inclusion</a></p></div>

<h2><a name="test"><code>test</code> Files</a></h2>

<p>The <code>gypi</code> files in test are only used for regression and performance tests. They are typically not included in your build environment. However they provide a reference for specific configuration, for example to set up dynamic library linkage.</p>

<h3><a name="test-test.gypi"><code>test.gypi</code></a></h3>

<p><code>test.gypi</code> contains all targets to produce all tests.</p>

<h3><a name="test-win.gypi"><code>win.gypi</code></a></h3>

<p><code>win.gypi</code> contains all specific Windows Visual Studio project options. It provides debug and release as well as 32-bit and 64-bit configurations.</p>

<p>It provides the only dependency of Flip, which is Winsockets 2 <code>ws2_32.lib</code>.</p>

<p>Finally it contains the set of disabled warnings necessary for the Flip framework to compile without any kind of warning :</p>

<ul>
<li><a href="http://msdn.microsoft.com/en-us/library/esew7y1w.aspx">Warning C4251</a></li>
</ul>

<h3><a name="test-xcode.gypi"><code>xcode.gypi</code></a></h3>

<p><code>xcode.gypi</code> contains all specific Apple XCode project options. It provides debug and release as well as 32-bit and 64-bit configurations.</p>

<h2><a name="headermap">Troubleshooting XCode header inclusion</a></h2>

<p>The default XCode header inclusion rule specifies that headers added to the project will be searched directly. This means that the <code>Document.h</code> file could be accessed as :</p>

<div class="codeblock"><table>
<tr><td><pre>#include &quot;Document.h&quot;</pre></td></tr>
</table></div>

<p>instead of :</p>

<div class="codeblock"><table>
<tr><td><pre>#include &quot;flip/Document.h&quot;</pre></td></tr>
</table></div>

<p>This is problematic on platforms where the HFS filesystem is specified as case insensitive. In this case system header files including for example <code>float.h</code> will use <code>flip/Float.h</code> instead.</p>

<p>On MacOS X, the issue arrises for <code>flip/Float.h</code> and <code>flip/Signal.h</code>.</p>

<p>To overcome this problem, the Flip user developer will have to explicitely tell XCode not to search those files by specifying <code>USE_HEADERMAP</code> to <code>NO</code>.</p>

<p>More information on this matter is available <a href="http://www.cocoabuilder.com/archive/xcode/285003-xcode-picks-up-headers-from-the-wrong-location.html">here</a>.</p>

<p>An example of this setting can be find in the top level <code>flip.gyp</code> file :</p>

<div class="codeblock"><table>
<tr><td><pre>&apos;xcode_settings&apos;: {</pre></td></tr>
<tr><td><pre>   &apos;USE_HEADERMAP&apos;: &apos;NO&apos;,</pre></td></tr>
<tr><td><pre>},</pre></td></tr>
</table></div>

<div class="nav" align="right">
<a href="files.html">previous</a><span>&nbsp;</span><a href="manual.html">next</a></div>

<div class="bottomspacer">&nbsp;</div>
</div>
</body>
</html>
