<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en" dir="ltr">

<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title>Flip Configuration Guide: MSVC Warnings Notes</title>
<style>
* {font-family: 'Lucida Grande', Helvetica, Arial, sans-serif; margin: 0; padding: 0; }
body {background-color: #fff; }
p {color: black; font-size: 13px; margin-bottom: 10px;}
h1 {color: black; font-size: 28px; margin-bottom: 32px; padding-top: 24px; font-weight: normal; display: block; }
h2 {color: #3c4c6c; display: block; font-size: 24px; font-weight: normal; margin-bottom: 20px; margin-top: 42px; border-bottom-color: #8391a8; border-bottom-style: solid; border-bottom-width: 1px;}
h3 {color: black; font-size: 19px; margin-bottom: 4px; margin-top: 28px; font-weight: normal; display: block; }
a {color: #36c; text-decoration: none; cursor:pointer; }
a:active {color: #36c; text-decoration: none; cursor:pointer; }
a:hover {color: #36c; text-decoration: underline; cursor:pointer; }
.aerr {color: #f00}
h2 a {color: #3c4c6c; text-decoration: none; cursor:auto; }
h2 a:active {color: #3c4c6c; text-decoration: none; cursor:auto; }
h2 a:hover {color: #3c4c6c; text-decoration: none; cursor:auto; }
h3 a {color: black; text-decoration: none; cursor:auto; }
h3 a:active {color: black; text-decoration: none; cursor:auto; }
h3 a:hover {color: black; text-decoration: none; cursor:auto; }
footer {font-size: 10px; position: fixed; display: block; bottom: 0px; background-color: #f1f5f9; border-top-color: #c7cfd5; border-top-style: solid; border-top-width: 1px; width: 100%; height:22px; padding-top: 7px; padding-left: 7px;}
div {display: block;}
.codeblock {margin-top:17px; margin-bottom:17px; clear: both; display: block; color: #333; }
pre {font-family: Courier, Consolas, monospace; font-size: 12px; height: 14px; line-height: 14px; margin-bottom: 0px; margin-left: 6px; margin-right: 4px; margin-top: -1px;}
small pre {color:#888;}
emph pre {color:#000;}
table {padding-top:5px; padding-bottom:6px; margin-bottom:12px; background-color: #f1f5f9; border-color: #c7cfd5; border-style: solid; border-width: 1px; width: 100%;}
tr {}
td > p {margin-left: 6px; height: 12px;}
.note {margin-top:21px; margin-bottom:22px; padding-left: 8px; padding-right: 8px; background-color: #fff; border-color: #5088c5; border-style: solid; border-width: 1px; display: block;}
.note strong {margin-right: 8px;}
.note p {margin-top: 7px;}
.important {margin-top:21px; margin-bottom:22px; padding-left: 8px; padding-right: 8px; background-color: #f1f5f9; border-color: #5088c5; border-style: solid; border-width: 1px; display: block;}
.important strong {margin-right: 8px;}
.important p {margin-top: 7px;}
.warning {margin-top:21px; margin-bottom:22px; padding-left: 8px; padding-right: 8px; background-color: #f8e3e1; border-color: #c5443e; border-style: solid; border-width: 1px; display: block;}
.warning strong {margin-right: 8px;}
.warning p {margin-top: 7px;}
.caption p {color: black; font-size: 10px; margin-bottom: 10px;}
img {margin-top:10px; margin-bottom:10px;}
ul {margin-left: 17px; margin-bottom: 10px;}
ol {margin-left: 17px; margin-bottom: 10px;}
li {color: black; font-size: 13px; margin-bottom: 7px;}
code {font-family: Courier, Consolas, monospace;}
#content {padding-left: 26px; padding-right: 26px; position: absolute; top: 30px; left: 230px; width: 750px;}
#toc {width: 230px; position: fixed; top: 30px; background-color: #f1f5f9; height: 100%; border-right-color: #c7cfd5; border-right-style: solid; border-right-width: 1px; padding-left: 0px; padding-top: 17px; overflow: auto;}
#toc > ul {list-style-type: none;}
#toc > ul > li {font-size: 11px; }
#toc > ul > li > ul {list-style-type: none; margin-top:8px;}
#toc > ul > li > ul > li {font-size: 11px; }
#toc > p {font-size: 13px; margin-left: 17px;}
.codeblock > p {margin-bottom: 3px; font-size: 11px;}
.codeblock > p > strong {margin-right: 10px; color: #222;}
.nav {font-size: 10px; margin-top: 20px; }
.nav > span {margin-right: 20px;}
.bottomspacer {height:100px;}
#header {width:100%; position: fixed; background-color: #111; height: 30px; z-index: 900;}
#header > p {color:#fff; font-size: 13px; padding-top: 6px; padding-left: 17px; }
#header > p > a {color:#fff; font-size: 13px; text-decoration: none; cursor:pointer; padding-right: 56px;}
.sectioncode {background-color: #f6f6f6; padding: 12px; margin-top: 18px;}
.sectioncode > h3 {margin-top: 0px; padding-bottom: 8px;}
hr { display: block; height: 1px; border: 0; border-top: 1px solid #eee; margin: 28px 0; padding: 0; }</style>
</head>

<body>

<div id="header">
<div style="width: 1006px;"></div>
<p><a href="../index.html">Flip Documentation Library</a><a href="../config/index.html">Flip Configuration Guide</a></p>
</div>
<div id="toc">
<p>Flip Configuration Guide</p>
<ul>
<li><a href="../config/about.html">About Flip Configuration Guide</a></li>
<li><a href="../config/files.html">Files Hierarchy</a></li>
<li><a href="../config/gyp.html">Setting up Using gyp</a></li>
<li><a href="../config/manual.html">Setting up Manually</a></li>
<li><a href="../config/dll.html">Using Flip as a Dynamic Linked Library (DLL)</a></li>
<li><a href="../config/misc.html">Miscellaneous Configuration</a></li>
<li><a href="../config/msvc.html">MSVC Warnings Notes</a>	<ul>
	<li><a href="../config/msvc.html#overview">Overview</a></li>
	<li><a href="../config/msvc.html#c4251">Warning C4251</a></li>
	<li><a href="../config/msvc.html#c4265">Warning C4265</a></li>
	<li><a href="../config/msvc.html#c4350">Warning C4350</a></li>
	<li><a href="../config/msvc.html#c4355">Warning C4355</a></li>
	<li><a href="../config/msvc.html#c4365">Warning C4365</a></li>
	<li><a href="../config/msvc.html#c4435">Warning C4435</a></li>
	<li><a href="../config/msvc.html#c4514">Warning C4514</a></li>
	<li><a href="../config/msvc.html#c4702">Warning C4702</a></li>
	<li><a href="../config/msvc.html#c4571">Warning C4571</a></li>
	<li><a href="../config/msvc.html#c4640">Warning C4640</a></li>
	<li><a href="../config/msvc.html#c4710">Warning C4710</a></li>
	<li><a href="../config/msvc.html#c4820">Warning C4820</a></li>
	</ul>
</li>
</ul>
</div>

<div id="content">
<div class="nav" align="right">
<a href="misc.html">previous</a></div>

<h1>MSVC Warnings Notes</h1>

<p>This chapter gives details on MSVC configuration regarding compiler warnings.</p>

<h2><a name="overview">Overview</a></h2>

<p>To accomodate our customers configurations, we followed a strict policy about warnings. Warnings are always treated as errors, so that flip must compile without generating any warnings.</p>

<p>To provide that, the following MSVS settings are used for the <code>cl</code> compiler :</p>

<div class="codeblock"><table>
<tr><td><pre>WarningLevel: 4</pre></td></tr>
<tr><td><pre>WarnAsError: true</pre></td></tr>
<tr><td><pre>AdditionalOptions: /Wall</pre></td></tr>
</table></div>

<p>We <em>do not</em> advise using this last warning line. In practice, it will activate all possible warnings, and in particular warnings that MSVS turns off by default.</p>

<p>Those additional warnings contain informational warnings, but they will also trigger warnings in the system headers and in particular in the standard library system headers.</p>

<p>As far as MSVS 12.0 is concerned, we decided to silent those warnings at a global scope, rather than silenting them in the source code directly.</p>

<p>The next sections will list all disabled warnings and gives a quick note on the reason and impact on code.</p>

<h2><a name="c4251">Warning C4251</a></h2>

<p><a href="http://msdn.microsoft.com/en-us/library/esew7y1w.aspx">MSDN Warning C4251 Reference</a></p>

<div class="codeblock"><table>
<tr><td><pre>&apos;identifier&apos; : class &apos;type&apos; needs to have dll-interface to be used by clients of class &apos;type2&apos;</pre></td></tr>
</table></div>

<p>This warning occurs as a false positive when exporting template code.</p>

<p>The regression tests (flip as a dll) ensure that flip is working correctly.</p>

<h2><a name="c4265">Warning C4265</a></h2>

<p><a href="http://msdn.microsoft.com/en-us/library/wzxffy8c.aspx">MSDN Warning C4265 Reference</a></p>

<div class="codeblock"><table>
<tr><td><pre>&apos;class&apos; : class has virtual functions, but destructor is not virtual</pre></td></tr>
</table></div>

<p>While this warning is important, it was disabled because it occurs in standard library headers such as <code><thread></code>, <code><mutex></code> or <code><condition_variable></code>.</p>

<p>We rely on the fact that the clang build will catch those problems.</p>

<h2><a name="c4350">Warning C4350</a></h2>

<p><a href="http://msdn.microsoft.com/en-us/library/0eestyah.aspx">MSDN Warning C4350 Reference</a></p>

<div class="codeblock"><table>
<tr><td><pre>behavior change: &apos;member1&apos; called instead of &apos;member2&apos;</pre></td></tr>
</table></div>

<p>This is treated as an informational warning.</p>

<h2><a name="c4355">Warning C4355</a></h2>

<p><a href="http://msdn.microsoft.com/en-us/3c594ae3.aspx">MSDN Warning C4355 Reference</a></p>

<div class="codeblock"><table>
<tr><td><pre>&apos;this&apos; : used in base member initializer list</pre></td></tr>
</table></div>

<p>This is treated as an informational warning. Internally the framework used <code>*this</code> to allow a child object to have access to its parent, when decomposing a big class into smaller feature-orthogonal classes.</p>

<h2><a name="c4365">Warning C4365</a></h2>

<p><a href="http://msdn.microsoft.com/en-us/ms173683.aspx">MSDN Warning C4365 Reference</a></p>

<div class="codeblock"><table>
<tr><td><pre>&apos;action&apos; : conversion from &apos;type_1&apos; to &apos;type_2&apos;, signed/unsigned mismatch</pre></td></tr>
</table></div>

<p>While this warning is important, it was disabled because it provides a lot of false positive that the standard permits.</p>

<p>We rely on the fact that the clang build will catch those problems.</p>

<h2><a name="c4435">Warning C4435</a></h2>

<p><a href="http://msdn.microsoft.com/en-us/jj155806.aspx">MSDN Warning C4435 Reference</a></p>

<div class="codeblock"><table>
<tr><td><pre>&apos;class1&apos; : Object layout under /vd2 will change due to virtual base &apos;class2&apos;</pre></td></tr>
</table></div>

<p>This is treated as an informational warning.</p>

<h2><a name="c4514">Warning C4514</a></h2>

<p><a href="http://msdn.microsoft.com/en-us/cw9x3tcf.aspx">MSDN Warning C4514 Reference</a></p>

<div class="codeblock"><table>
<tr><td><pre>&apos;function&apos; : unreferenced inline function has been removed</pre></td></tr>
</table></div>

<p>This is treated as an informational warning.</p>

<h2><a name="c4702">Warning C4702</a></h2>

<p><a href="http://msdn.microsoft.com/en-us/c26da40e.aspx">MSDN Warning C4702 Reference</a></p>

<div class="codeblock"><table>
<tr><td><pre>unreachable code</pre></td></tr>
</table></div>

<p>This is treated as an informational warning.</p>

<h2><a name="c4571">Warning C4571</a></h2>

<p><a href="http://msdn.microsoft.com/en-us/55s8esw4.aspx">MSDN Warning C4571 Reference</a></p>

<div class="codeblock"><table>
<tr><td><pre>Informational: catch(...) semantics changed since Visual C++ 7.1;</pre></td></tr>
<tr><td><pre>structured exceptions (SEH) are no longer caught</pre></td></tr>
</table></div>

<p>This is treated as an informational warning.</p>

<h2><a name="c4640">Warning C4640</a></h2>

<p><a href="http://msdn.microsoft.com/en-us/4f5c8560.aspx">MSDN Warning C4640 Reference</a></p>

<div class="codeblock"><table>
<tr><td><pre>&apos;instance&apos; : construction of local static object is not thread-safe</pre></td></tr>
</table></div>

<p>The C++11 standard states (section 6.7):</p>

<div class="note"><p><strong>Note:</strong> such a variable is initialized the first time control passes through its declaration; such a variable is considered initialized upon the completion of its initialization. [...] If control enters the declaration concurrently while the variable is being initialized, the concurrent execution shall wait for completion of the initialization.</p></div>

<p>So we ignore this warning. However for compatibility, the cases where this is used are for now marked as non-thread-safe, which is acceptable since this is occured when declaring models.</p>

<h2><a name="c4710">Warning C4710</a></h2>

<p><a href="http://msdn.microsoft.com/en-us/yd3056cz.aspx">MSDN Warning C4710 Reference</a></p>

<div class="codeblock"><table>
<tr><td><pre>&apos;function&apos; : function not inlined</pre></td></tr>
</table></div>

<p>This is treated as an informational warning.</p>

<h2><a name="c4820">Warning C4820</a></h2>

<p><a href="http://msdn.microsoft.com/en-us/t7khkyth.aspx">MSDN Warning C4820 Reference</a></p>

<div class="codeblock"><table>
<tr><td><pre>&apos;bytes&apos; bytes padding added after construct &apos;member_name&apos;</pre></td></tr>
</table></div>

<p>This is treated as an informational warning.</p>

<div class="nav" align="right">
<a href="misc.html">previous</a></div>

<div class="bottomspacer">&nbsp;</div>
</div>
</body>
</html>
