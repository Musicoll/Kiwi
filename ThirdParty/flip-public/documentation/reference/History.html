<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en" dir="ltr">

<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title>Flip Reference: History</title>
<style>
* {font-family: 'Lucida Grande', Helvetica, Arial, sans-serif; margin: 0; padding: 0; }
body {background-color: #fff; }
p {color: black; font-size: 13px; margin-bottom: 10px;}
h1 {color: black; font-size: 28px; margin-bottom: 32px; padding-top: 24px; font-weight: normal; display: block; }
h2 {color: #3c4c6c; display: block; font-size: 24px; font-weight: normal; margin-bottom: 20px; margin-top: 42px; border-bottom-color: #8391a8; border-bottom-style: solid; border-bottom-width: 1px;}
h3 {color: black; font-size: 19px; margin-bottom: 4px; margin-top: 28px; font-weight: normal; display: block; }
a {color: #36c; text-decoration: none; cursor:pointer; }
a:active {color: #36c; text-decoration: none; cursor:pointer; }
a:hover {color: #36c; text-decoration: underline; cursor:pointer; }
.aerr {color: #f00}
h2 a {color: #3c4c6c; text-decoration: none; cursor:auto; }
h2 a:active {color: #3c4c6c; text-decoration: none; cursor:auto; }
h2 a:hover {color: #3c4c6c; text-decoration: none; cursor:auto; }
h3 a {color: black; text-decoration: none; cursor:auto; }
h3 a:active {color: black; text-decoration: none; cursor:auto; }
h3 a:hover {color: black; text-decoration: none; cursor:auto; }
footer {font-size: 10px; position: fixed; display: block; bottom: 0px; background-color: #f1f5f9; border-top-color: #c7cfd5; border-top-style: solid; border-top-width: 1px; width: 100%; height:22px; padding-top: 7px; padding-left: 7px;}
div {display: block;}
.codeblock {margin-top:17px; margin-bottom:17px; clear: both; display: block; color: #333; }
pre {font-family: Courier, Consolas, monospace; font-size: 12px; height: 14px; line-height: 14px; margin-bottom: 0px; margin-left: 6px; margin-right: 4px; margin-top: -1px;}
small pre {color:#888;}
emph pre {color:#000;}
table {padding-top:5px; padding-bottom:6px; margin-bottom:12px; background-color: #f1f5f9; border-color: #c7cfd5; border-style: solid; border-width: 1px; width: 100%;}
tr {}
td > p {margin-left: 6px; height: 12px;}
.note {margin-top:21px; margin-bottom:22px; padding-left: 8px; padding-right: 8px; background-color: #fff; border-color: #5088c5; border-style: solid; border-width: 1px; display: block;}
.note strong {margin-right: 8px;}
.note p {margin-top: 7px;}
.important {margin-top:21px; margin-bottom:22px; padding-left: 8px; padding-right: 8px; background-color: #f1f5f9; border-color: #5088c5; border-style: solid; border-width: 1px; display: block;}
.important strong {margin-right: 8px;}
.important p {margin-top: 7px;}
.warning {margin-top:21px; margin-bottom:22px; padding-left: 8px; padding-right: 8px; background-color: #f8e3e1; border-color: #c5443e; border-style: solid; border-width: 1px; display: block;}
.warning strong {margin-right: 8px;}
.warning p {margin-top: 7px;}
.caption p {color: black; font-size: 10px; margin-bottom: 10px;}
img {margin-top:10px; margin-bottom:10px;}
ul {margin-left: 17px; margin-bottom: 10px;}
ol {margin-left: 17px; margin-bottom: 10px;}
li {color: black; font-size: 13px; margin-bottom: 7px;}
code {font-family: Courier, Consolas, monospace;}
#content {padding-left: 26px; padding-right: 26px; position: absolute; top: 30px; left: 230px; width: 750px;}
#toc {width: 230px; position: fixed; top: 30px; background-color: #f1f5f9; height: 100%; border-right-color: #c7cfd5; border-right-style: solid; border-right-width: 1px; padding-left: 0px; padding-top: 17px; overflow: auto;}
#toc > ul {list-style-type: none;}
#toc > ul > li {font-size: 11px; }
#toc > ul > li > ul {list-style-type: none; margin-top:8px;}
#toc > ul > li > ul > li {font-size: 11px; }
#toc > p {font-size: 13px; margin-left: 17px;}
.codeblock > p {margin-bottom: 3px; font-size: 11px;}
.codeblock > p > strong {margin-right: 10px; color: #222;}
.nav {font-size: 10px; margin-top: 20px; }
.nav > span {margin-right: 20px;}
.bottomspacer {height:100px;}
#header {width:100%; position: fixed; background-color: #111; height: 30px; z-index: 900;}
#header > p {color:#fff; font-size: 13px; padding-top: 6px; padding-left: 17px; }
#header > p > a {color:#fff; font-size: 13px; text-decoration: none; cursor:pointer; padding-right: 56px;}
.sectioncode {background-color: #f6f6f6; padding: 12px; margin-top: 18px;}
.sectioncode > h3 {margin-top: 0px; padding-bottom: 8px;}
hr { display: block; height: 1px; border: 0; border-top: 1px solid #eee; margin: 28px 0; padding: 0; }</style>
</head>

<body>

<div id="header">
<div style="width: 1006px;"></div>
<p><a href="../index.html">Flip Documentation Library</a><a href="../reference/index.html">Flip Reference</a></p>
</div>
<div id="toc">
<p>Flip Reference</p>
<ul>
<li><a href="../reference/Array.html">Array</a></li>
<li><a href="../reference/Array.iterator.html">Array::iterator</a></li>
<li><a href="../reference/array_iterator.html">array_iterator</a></li>
<li><a href="../reference/BackEndBinary.html">BackEndBinary</a></li>
<li><a href="../reference/BackEndIR.html">BackEndIR</a></li>
<li><a href="../reference/BackEndMl.html">BackEndMl</a></li>
<li><a href="../reference/Blob.html">Blob</a></li>
<li><a href="../reference/Bool.html">Bool</a></li>
<li><a href="../reference/Class.html">Class</a></li>
<li><a href="../reference/Collection.html">Collection</a></li>
<li><a href="../reference/Collection.iterator.html">Collection::iterator</a></li>
<li><a href="../reference/collection_iterator.html">collection_iterator</a></li>
<li><a href="../reference/DataConsumerFile.html">DataConsumerFile</a></li>
<li><a href="../reference/DataConsumerMemory.html">DataConsumerMemory</a></li>
<li><a href="../reference/DataModel.html">DataModel</a></li>
<li><a href="../reference/DataProviderFile.html">DataProviderFile</a></li>
<li><a href="../reference/DataProviderMemory.html">DataProviderMemory</a></li>
<li><a href="../reference/Document.html">Document</a></li>
<li><a href="../reference/DocumentObserver.html">DocumentObserver</a></li>
<li><a href="../reference/DocumentServer.html">DocumentServer</a></li>
<li><a href="../reference/DocumentValidator.html">DocumentValidator</a></li>
<li><a href="../reference/Entity.html">Entity</a></li>
<li><a href="../reference/Enum.html">Enum</a></li>
<li><a href="../reference/EnumClass.html">EnumClass</a></li>
<li><a href="../reference/Float.html">Float</a></li>
<li><a href="../reference/History.html">History</a>	<ul>
	</ul>
</li>
<li><a href="../reference/Hub.html">Hub</a></li>
<li><a href="../reference/Int.html">Int</a></li>
<li><a href="../reference/Message.html">Message</a></li>
<li><a href="../reference/Mold.html">Mold</a></li>
<li><a href="../reference/MulticastServiceExplorer.html">MulticastServiceExplorer</a></li>
<li><a href="../reference/MulticastServiceProvider.html">MulticastServiceProvider</a></li>
<li><a href="../reference/Object.html">Object</a></li>
<li><a href="../reference/ObjectRef.html">ObjectRef</a></li>
<li><a href="../reference/Optional.html">Optional</a></li>
<li><a href="../reference/Ref.html">Ref</a></li>
<li><a href="../reference/Signal.html">Signal</a></li>
<li><a href="../reference/String.html">String</a></li>
<li><a href="../reference/Transaction.html">Transaction</a></li>
<li><a href="../reference/Variant.html">Variant</a></li>
<li><a href="../reference/Vector.html">Vector</a></li>
</ul>
</div>

<div id="content">
<div class="nav" align="right">
<a href="Float.html">previous</a><span>&nbsp;</span><a href="Hub.html">next</a></div>

<h1>History Class Reference</h1>

<table><tr><td><p>Declared in</p></td><td><p><code>flip/History.h</code></p></td></tr>
</table>

<div class="codeblock"><table>
<tr><td><pre>template &lt;class HistoryStoreImpl&gt;   class History;</pre></td></tr>
</table></div>

<p><code>flip::History</code> is a flip compatible undo/redo stack implementation.</p>

<p>This class is typically used in conjunction with an history store such as :</p>

<ul>
<li><code>HistoryStoreMemory</code> defined in <code>"flip/HistoryStoreMemory.h"</code>    which will store a non-persistent (in memory) history</li>
<li><code>HistoryStoreFile</code> defined in <code>"flip/contrib/HistoryStoreFile.h"</code>    which will store a persistent (file based) history</li>
</ul>

<p>See the book <a href="../history/index.html">Flip History Strategy Guide</a> for examples on how to use <code>History</code>.</p>

<h2>Template Parameters</h2>

<table><tr><td><p><code>HistoryStoreImpl</code></p></td><td><p>The type of history store, for example <code>HistoryStoreMemory</code>    or <code>HistoryStoreFile</code></p></td></tr>
</table>

<h2>Member Types</h2>

<table><tr><td><p><code>iterator</code></p></td><td><p>Bidirectional access iterator</p></td></tr>
</table>

<h2>Member Functions Synopsys</h2>

<table><tr><td><p><a href="#member-function-constructor">Constructor</a></p></td><td><p>Construct the <code>History</code></p></td></tr>
<tr><td><p><code><a href="#member-function-add_undo_step">add_undo_step</a></code></p></td><td><p>Add a new transaction on the undo stack</p></td></tr>
</table>

<h3>Iterators</h3>

<table><tr><td><p><code><a href="#member-function-begin">begin</a></code></p></td><td><p>Returns an iterator to the beginning</p></td></tr>
<tr><td><p><code><a href="#member-function-end">end</a></code></p></td><td><p>Returns an iterator to the end</p></td></tr>
<tr><td><p><code><a href="#member-function-last_undo">last_undo</a></code></p></td><td><p>Returns an iterator to last undo step</p></td></tr>
<tr><td><p><code><a href="#member-function-first_redo">first_redo</a></code></p></td><td><p>Returns an iterator to first redo step</p></td></tr>
</table>

<h3>Modifiers</h3>

<table><tr><td><p><code><a href="#member-function-clear">clear</a></code></p></td><td><p>Clears the contents</p></td></tr>
<tr><td><p><code><a href="#member-function-erase">erase</a></code></p></td><td><p>Erases element</p></td></tr>
<tr><td><p><code><a href="#member-function-execute_undo">execute_undo</a></code></p></td><td><p>Execute last undo step</p></td></tr>
<tr><td><p><code><a href="#member-function-execute_redo">execute_redo</a></code></p></td><td><p>Execute first redo step</p></td></tr>
</table>

<h3>Miscellaneous</h3>

<table><tr><td><p><code><a href="#member-function-version">version</a></code></p></td><td><p>Returns the history model version</p></td></tr>
</table>

<h2>Member Functions</h2>

<h3 id="member-function-constructor">Constructor</h3>
<div class="codeblock"><table>
<tr><td><pre>template &lt;class... Args&gt;   History (DocumentBase &amp; document, Args &amp;&amp;... args);</pre></td></tr>
</table></div>

<p>Construct the <code>History</code> by attaching it to the document on which it shall operate. <code>args</code> are passed to the underlying <code>HistoryStoreImpl</code>.</p>

<p>Example :</p>

<div class="codeblock"><table>
<tr><td><pre>Document document (Model::use (), 123456789UL, &apos;appl&apos;, &apos;gui &apos;);</pre></td></tr>
<tr><td><pre></pre></td></tr>
<tr><td><pre>// Creates a persistent history saved to &quot;/path/to/file&quot;</pre></td></tr>
<tr><td><pre>History &lt;HistoryStoreFile&gt; history (document, &quot;/path/to/file&quot;);</pre></td></tr>
</table></div>

<hr /><h3 id="member-function-add_undo_step"><code>add_undo_step</code></h3>
<div class="codeblock"><table>
<tr><td><pre>void  add_undo_step (Transaction tx);</pre></td></tr>
</table></div>

<p>Add a new transaction on the undo stack. The transaction might be empty or have no operations enabled in undo, in which case the operation is ignored.</p>

<p>Example :</p>

<div class="codeblock"><table>
<tr><td><pre>Document document (Model::use (), 123456789UL, &apos;appl&apos;, &apos;gui &apos;);</pre></td></tr>
<tr><td><pre></pre></td></tr>
<tr><td><pre>// Creates a temporary history in memory</pre></td></tr>
<tr><td><pre>History &lt;HistoryStoreMemory&gt; history (document);</pre></td></tr>
<tr><td><pre></pre></td></tr>
<tr><td><pre>Root &amp; root = document.root &lt;Root&gt; ();</pre></td></tr>
<tr><td><pre>root.tempo = 145.0;</pre></td></tr>
<tr><td><pre></pre></td></tr>
<tr><td><pre>// name the current change</pre></td></tr>
<tr><td><pre>document.set_label (&quot;Change Tempo&quot;);</pre></td></tr>
<tr><td><pre></pre></td></tr>
<tr><td><pre>// commit the change and get the associated transaction</pre></td></tr>
<tr><td><pre>// the transaction contains the label &quot;Change Tempo&quot;</pre></td></tr>
<tr><td><pre>auto tx = document.commit ();</pre></td></tr>
<tr><td><pre></pre></td></tr>
<tr><td><pre>// add an undo step</pre></td></tr>
<tr><td><pre>history.add_undo_step (tx);</pre></td></tr>
<tr><td><pre></pre></td></tr>
<tr><td><pre>// fetch undo label</pre></td></tr>
<tr><td><pre>std::cout &lt;&lt; history.last_undo ()-&gt;label ();</pre></td></tr>
<tr><td><pre>// displays &quot;Change Tempo&quot;</pre></td></tr>
<tr><td><pre></pre></td></tr>
<tr><td><pre>// undo operation</pre></td></tr>
<tr><td><pre>history.execute_undo ();</pre></td></tr>
<tr><td><pre></pre></td></tr>
<tr><td><pre>// fetch redo label</pre></td></tr>
<tr><td><pre>std::cout &lt;&lt; history.first_redo ()-&gt;label ();</pre></td></tr>
<tr><td><pre>// displays &quot;Change Tempo&quot;</pre></td></tr>
<tr><td><pre></pre></td></tr>
<tr><td><pre>// redo operation</pre></td></tr>
<tr><td><pre>history.execute_redo ();</pre></td></tr>
</table></div>

<hr /><h3 id="member-function-begin"><code>begin</code></h3>
<div class="codeblock"><table>
<tr><td><pre>iterator  begin ();</pre></td></tr>
</table></div>

<p>Returns an iterator to the beginning of the history. If the history is empty, then the iterator returned is the same as the one returned by <code>end</code>.</p>

<hr /><h3 id="member-function-end"><code>end</code></h3>
<div class="codeblock"><table>
<tr><td><pre>iterator  end ();</pre></td></tr>
</table></div>

<p>Returns an iterator to the end of the history, that is the element past the last element in the history.</p>

<hr /><h3 id="member-function-last_undo"><code>last_undo</code></h3>
<div class="codeblock"><table>
<tr><td><pre>iterator  last_undo ();</pre></td></tr>
</table></div>

<p>Returns an iterator to last undo step of the history. If there is no last undo step, then the iterator returned is the same as the one returned by <code>end</code>.</p>

<hr /><h3 id="member-function-first_redo"><code>first_redo</code></h3>
<div class="codeblock"><table>
<tr><td><pre>iterator  first_redo ();</pre></td></tr>
</table></div>

<p>Returns an iterator to first redo step of the history. If there is no first redo step, then the iterator returned is the same as the one returned by <code>end</code>.</p>

<hr /><h3 id="member-function-clear"><code>clear</code></h3>
<div class="codeblock"><table>
<tr><td><pre>void  clear ();</pre></td></tr>
</table></div>

<p>Clears the contents of the history.</p>

<hr /><h3 id="member-function-erase"><code>erase</code></h3>
<div class="codeblock"><table>
<tr><td><pre>iterator  erase (iterator it);</pre></td></tr>
</table></div>

<p>Erases history element at position <code>it</code>. Returns the <code>iterator</code> following <code>it</code>.</p>

<hr /><h3 id="member-function-execute_undo"><code>execute_undo</code></h3>
<div class="codeblock"><table>
<tr><td><pre>bool  execute_undo ();</pre></td></tr>
</table></div>

<p>Executes the last undo step by replaying its associated transaction backward. Returns <code>true</code> if the transaction execution was successful, <code>false</code> otherwise.</p>

<hr /><h3 id="member-function-execute_redo"><code>execute_redo</code></h3>
<div class="codeblock"><table>
<tr><td><pre>bool  execute_redo ();</pre></td></tr>
</table></div>

<p>Executes the first redo step by replaying its associated transaction forward. Returns <code>true</code> if the transaction execution was successful, <code>false</code> otherwise.</p>

<hr /><h3 id="member-function-version"><code>version</code></h3>
<div class="codeblock"><table>
<tr><td><pre>std::string  version ();</pre></td></tr>
</table></div>

<p>Returns the history data model version at the moment of history creation. This is relevant only for history stores that provide persistence of history, like <code>HistoryStoreFile</code>.</p>

<div class="nav" align="right">
<a href="Float.html">previous</a><span>&nbsp;</span><a href="Hub.html">next</a></div>

<div class="bottomspacer">&nbsp;</div>
</div>
</body>
</html>
