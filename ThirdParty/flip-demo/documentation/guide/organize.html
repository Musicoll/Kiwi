<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en" dir="ltr">

<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title>Flip Basics Programming Guide: Organizing your Code</title>
<style>
* {font-family: 'Lucida Grande', Helvetica, Arial, sans-serif; margin: 0; padding: 0; }
body {background-color: #fff; }
p {color: black; font-size: 13px; margin-bottom: 10px;}
h1 {color: black; font-size: 28px; margin-bottom: 32px; padding-top: 24px; font-weight: normal; display: block; }
h2 {color: #3c4c6c; display: block; font-size: 24px; font-weight: normal; margin-bottom: 20px; margin-top: 42px; border-bottom-color: #8391a8; border-bottom-style: solid; border-bottom-width: 1px;}
h3 {color: black; font-size: 19px; margin-bottom: 4px; margin-top: 28px; font-weight: normal; display: block; }
a {color: #36c; text-decoration: none; cursor:pointer; }
a:active {color: #36c; text-decoration: none; cursor:pointer; }
a:hover {color: #36c; text-decoration: underline; cursor:pointer; }
.aerr {color: #f00}
h2 a {color: #3c4c6c; text-decoration: none; cursor:auto; }
h2 a:active {color: #3c4c6c; text-decoration: none; cursor:auto; }
h2 a:hover {color: #3c4c6c; text-decoration: none; cursor:auto; }
h3 a {color: black; text-decoration: none; cursor:auto; }
h3 a:active {color: black; text-decoration: none; cursor:auto; }
h3 a:hover {color: black; text-decoration: none; cursor:auto; }
footer {font-size: 10px; position: fixed; display: block; bottom: 0px; background-color: #f1f5f9; border-top-color: #c7cfd5; border-top-style: solid; border-top-width: 1px; width: 100%; height:22px; padding-top: 7px; padding-left: 7px;}
div {display: block;}
.codeblock {margin-top:17px; margin-bottom:17px; clear: both; display: block; color: #333; }
pre {font-family: Courier, Consolas, monospace; font-size: 12px; height: 14px; line-height: 14px; margin-bottom: 0px; margin-left: 6px; margin-right: 4px; margin-top: -1px;}
small pre {color:#888;}
emph pre {color:#000;}
table {padding-top:5px; padding-bottom:6px; margin-bottom:12px; background-color: #f1f5f9; border-color: #c7cfd5; border-style: solid; border-width: 1px; width: 100%;}
tr {}
td > p {margin-left: 6px; height: 12px;}
.note {margin-top:21px; margin-bottom:22px; padding-left: 8px; padding-right: 8px; background-color: #fff; border-color: #5088c5; border-style: solid; border-width: 1px; display: block;}
.note strong {margin-right: 8px;}
.note p {margin-top: 7px;}
.important {margin-top:21px; margin-bottom:22px; padding-left: 8px; padding-right: 8px; background-color: #f1f5f9; border-color: #5088c5; border-style: solid; border-width: 1px; display: block;}
.important strong {margin-right: 8px;}
.important p {margin-top: 7px;}
.warning {margin-top:21px; margin-bottom:22px; padding-left: 8px; padding-right: 8px; background-color: #f8e3e1; border-color: #c5443e; border-style: solid; border-width: 1px; display: block;}
.warning strong {margin-right: 8px;}
.warning p {margin-top: 7px;}
.caption p {color: black; font-size: 10px; margin-bottom: 10px;}
img {margin-top:10px; margin-bottom:10px;}
ul {margin-left: 17px; margin-bottom: 10px;}
ol {margin-left: 17px; margin-bottom: 10px;}
li {color: black; font-size: 13px; margin-bottom: 7px;}
code {font-family: Courier, Consolas, monospace;}
#content {padding-left: 26px; padding-right: 26px; position: absolute; top: 30px; left: 230px; width: 750px;}
#toc {width: 230px; position: fixed; top: 30px; background-color: #f1f5f9; height: 100%; border-right-color: #c7cfd5; border-right-style: solid; border-right-width: 1px; padding-left: 0px; padding-top: 17px; overflow: auto;}
#toc > ul {list-style-type: none;}
#toc > ul > li {font-size: 11px; }
#toc > ul > li > ul {list-style-type: none; margin-top:8px;}
#toc > ul > li > ul > li {font-size: 11px; }
#toc > p {font-size: 13px; margin-left: 17px;}
.codeblock > p {margin-bottom: 3px; font-size: 11px;}
.codeblock > p > strong {margin-right: 10px; color: #222;}
.nav {font-size: 10px; margin-top: 20px; }
.nav > span {margin-right: 20px;}
.bottomspacer {height:100px;}
#header {width:100%; position: fixed; background-color: #111; height: 30px; z-index: 900;}
#header > p {color:#fff; font-size: 13px; padding-top: 6px; padding-left: 17px; }
#header > p > a {color:#fff; font-size: 13px; text-decoration: none; cursor:pointer; padding-right: 56px;}
.sectioncode {background-color: #f6f6f6; padding: 12px; margin-top: 18px;}
.sectioncode > h3 {margin-top: 0px; padding-bottom: 8px;}
hr { display: block; height: 1px; border: 0; border-top: 1px solid #eee; margin: 28px 0; padding: 0; }</style>
</head>

<body>

<div id="header">
<div style="width: 1006px;"></div>
<p><a href="../index.html">Flip Documentation Library</a><a href="../guide/index.html">Flip Basics Programming Guide</a></p>
</div>
<div id="toc">
<p>Flip Basics Programming Guide</p>
<ul>
<li><a href="../guide/about.html">About Flip Programming Guide</a></li>
<li><a href="../guide/declare.html">Declaring the Model</a></li>
<li><a href="../guide/organize.html">Organizing your Code</a>	<ul>
	<li><a href="../guide/organize.html#layout">Code Layout</a></li>
	<li><a href="../guide/organize.html#converters">Converters</a></li>
	<li><a href="../guide/organize.html#class">Classes Naming Conventions</a></li>
	<li><a href="../guide/organize.html#enum">Enums Naming Conventions</a></li>
	<li><a href="../guide/organize.html#declaration">Declaration Conventions</a></li>
	</ul>
</li>
<li><a href="../guide/control.html">Controlling the Model</a></li>
<li><a href="../guide/observe.html">Observing the Model</a></li>
<li><a href="../guide/signal.html">Signalling the Model</a></li>
<li><a href="../guide/remote.html">Working with a Remote Server</a></li>
<li><a href="../guide/misc.html">More Fun with Flip</a></li>
<li><a href="../guide/conversion.html">Model Versioning</a></li>
</ul>
</div>

<div id="content">
<div class="nav" align="right">
<a href="declare.html">previous</a><span>&nbsp;</span><a href="control.html">next</a></div>

<h1>Organizing your Code</h1>

<p>Now that you know how to declare a model, but before we go further into Flip code, now is the time to expose strategies to organize your code to use Flip.</p>

<p>Ohm Force has been using its Flip framework for years, to make, among other internal programs, its Ohm Studio application.</p>

<p>Over the years, we have developed a robust workflow to work with Flip. This chapter describes how you should organize your code in the first place, to avoid big refactors or headaches at a late stage of development.</p>

<h2><a name="layout">Code Layout</a></h2>

<p>You should separate the model, client and server code in 3 separate folders, and 3 separate namespaces.</p>

<p>Typically you should create a folder named <code>model</code> in which all classes are in the namespace <code>model</code> . The model is going to be used in both the client code and the server code. Since the server code is generally going to be running on linux, you want to avoid avoid dependencies between your model and code that wouldnâ€™t compile on linux, and would be unnecessary for the server.</p>

<p>Typically your folder client and server and their associated namespaces will have a dependency on model .</p>

<div class="codeblock"><table>
<tr><td><pre>your_company/</pre></td></tr>
<tr><td><pre>   your_product/</pre></td></tr>
<tr><td><pre>      model/</pre></td></tr>
<tr><td><pre>         ... model classes ...</pre></td></tr>
<tr><td><pre>      client/</pre></td></tr>
<tr><td><pre>         ... client classes ...</pre></td></tr>
<tr><td><pre>      server/</pre></td></tr>
<tr><td><pre>         ... server classes ...</pre></td></tr>
</table></div>

<h2><a name="converters">Converters</a></h2>

<p>Your <code>model</code> folder should contain a <code>conv</code> folder. It will contains all your format version changes in a single place. Since Flip format conversion system is rather flexible, it is very easy to make document format changes, so you are very likely to make a lot of them.</p>

<p>To avoid polluting the model folder, having it separated in a different folder is a good solution.</p>

<p>You should name your conversion classes <code>Converter#1_#2</code> where <code>#1</code> would be the initial revision, according to your version source control naming. In the same fashion, <code>#2</code> would be your destination revision.</p>

<p>If you are working with many people on a Flip project, many people might modify the model simulatenously. This is not an issue when developping, as the server is bundled in the client, and because you can generally start on a fresh document to test your changes.</p>

<p>However when your application is running in a production environment, conversion will be need to be done, somehow like migrating a database. The model changes are therefore scattered over all the Flip classes which might be not easy when trying to gather all the changes to write a converter.</p>

<p>Therefore you should maintain a <code>Converter.txt</code> text file, typically in your conv where you will sum up all the changes needed for the next conversion, and maybe some directions on how to convert the document.</p>

<p>This process is covered in more details in the chapter <a href="../guide/conversion.html">Model Versioning</a>.</p>

<h2><a name="class">Classes Naming Conventions</a></h2>

<p>You should name your classes like <code>your_company.your_product.ClassName</code> where ClassName would be the name of your class.</p>

<p>For example a typical class name would be <code>ohm.studio.Root</code>. It is defined when declaring the class as for example in the following code :</p>

<div class="codeblock"><table>
<tr><td><pre>Model::declare &lt;Root&gt; ()</pre></td></tr>
<tr><td><pre>   .name (&quot;ohm.studio.Root&quot;)</pre></td></tr>
</table></div>

<h2><a name="enum">Enums Naming Conventions</a></h2>

<p>You should name your classes like <code>your_company.your_product.ClassName.EnumName</code> where ClassName would be the name of your class.</p>

<p>For example a typical class name would be <code>ohm.studio.ViewMetrics.Lod</code>. It is defined when declaring the class as for example in the following code :</p>

<div class="codeblock"><table>
<tr><td><pre>Model::declare &lt;Lod&gt; ()</pre></td></tr>
<tr><td><pre>   .name (&quot;ohm.studio.ViewMetrics.Lod&quot;)</pre></td></tr>
</table></div>

<h2><a name="declaration">Declaration Conventions</a></h2>

<p>Finally your <code>model</code> should contain a function that will at least handle the declaration of the model. Each Flip class should have a <code>static</code> function member called <code>declare</code>. Typically it would look like :</p>

<div class="codeblock"><table>
<tr><td><pre>void  declare ()</pre></td></tr>
<tr><td><pre>{</pre></td></tr>
<tr><td><pre>   ObjectRef::declare ();</pre></td></tr>
<tr><td><pre>   Selection::declare ();</pre></td></tr>
<tr><td><pre></pre></td></tr>
<tr><td><pre></pre></td></tr>
<tr><td><pre>   ... code skipped ...</pre></td></tr>
<tr><td><pre></pre></td></tr>
<tr><td><pre></pre></td></tr>
<tr><td><pre>   Root::declare ();</pre></td></tr>
<tr><td><pre>}</pre></td></tr>
</table></div>

<p>The dependency system makes it easier to declare all the classes in the right order in a single function when a project becomes complex.</p>

<p>The next chapter, <a href="../guide/control.html">Controlling the Model</a> will guide you through the task of controlling the model.</p>

<div class="nav" align="right">
<a href="declare.html">previous</a><span>&nbsp;</span><a href="control.html">next</a></div>

<div class="bottomspacer">&nbsp;</div>
</div>
</body>
</html>
