<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en" dir="ltr">

<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title>Flip Reference: BackEndIR</title>
<style>
* {font-family: 'Lucida Grande', Helvetica, Arial, sans-serif; margin: 0; padding: 0; }
body {background-color: #fff; }
p {color: black; font-size: 13px; margin-bottom: 10px;}
h1 {color: black; font-size: 28px; margin-bottom: 32px; padding-top: 24px; font-weight: normal; display: block; }
h2 {color: #3c4c6c; display: block; font-size: 24px; font-weight: normal; margin-bottom: 20px; margin-top: 42px; border-bottom-color: #8391a8; border-bottom-style: solid; border-bottom-width: 1px;}
h3 {color: black; font-size: 19px; margin-bottom: 4px; margin-top: 28px; font-weight: normal; display: block; }
a {color: #36c; text-decoration: none; cursor:pointer; }
a:active {color: #36c; text-decoration: none; cursor:pointer; }
a:hover {color: #36c; text-decoration: underline; cursor:pointer; }
.aerr {color: #f00}
h2 a {color: #3c4c6c; text-decoration: none; cursor:auto; }
h2 a:active {color: #3c4c6c; text-decoration: none; cursor:auto; }
h2 a:hover {color: #3c4c6c; text-decoration: none; cursor:auto; }
h3 a {color: black; text-decoration: none; cursor:auto; }
h3 a:active {color: black; text-decoration: none; cursor:auto; }
h3 a:hover {color: black; text-decoration: none; cursor:auto; }
footer {font-size: 10px; position: fixed; display: block; bottom: 0px; background-color: #f1f5f9; border-top-color: #c7cfd5; border-top-style: solid; border-top-width: 1px; width: 100%; height:22px; padding-top: 7px; padding-left: 7px;}
div {display: block;}
.codeblock {margin-top:17px; margin-bottom:17px; clear: both; display: block; color: #333; }
pre {font-family: Courier, Consolas, monospace; font-size: 12px; height: 14px; line-height: 14px; margin-bottom: 0px; margin-left: 6px; margin-right: 4px; margin-top: -1px;}
small pre {color:#888;}
emph pre {color:#000;}
table {padding-top:5px; padding-bottom:6px; margin-bottom:12px; background-color: #f1f5f9; border-color: #c7cfd5; border-style: solid; border-width: 1px; width: 100%;}
tr {}
td > p {margin-left: 6px; height: 12px;}
.note {margin-top:21px; margin-bottom:22px; padding-left: 8px; padding-right: 8px; background-color: #fff; border-color: #5088c5; border-style: solid; border-width: 1px; display: block;}
.note strong {margin-right: 8px;}
.note p {margin-top: 7px;}
.important {margin-top:21px; margin-bottom:22px; padding-left: 8px; padding-right: 8px; background-color: #f1f5f9; border-color: #5088c5; border-style: solid; border-width: 1px; display: block;}
.important strong {margin-right: 8px;}
.important p {margin-top: 7px;}
.warning {margin-top:21px; margin-bottom:22px; padding-left: 8px; padding-right: 8px; background-color: #f8e3e1; border-color: #c5443e; border-style: solid; border-width: 1px; display: block;}
.warning strong {margin-right: 8px;}
.warning p {margin-top: 7px;}
.caption p {color: black; font-size: 10px; margin-bottom: 10px;}
img {margin-top:10px; margin-bottom:10px;}
ul {margin-left: 17px; margin-bottom: 10px;}
ol {margin-left: 17px; margin-bottom: 10px;}
li {color: black; font-size: 13px; margin-bottom: 7px;}
code {font-family: Courier, Consolas, monospace;}
#content {padding-left: 26px; padding-right: 26px; position: absolute; top: 30px; left: 230px; width: 750px;}
#toc {width: 230px; position: fixed; top: 30px; background-color: #f1f5f9; height: 100%; border-right-color: #c7cfd5; border-right-style: solid; border-right-width: 1px; padding-left: 0px; padding-top: 17px; overflow: auto;}
#toc > ul {list-style-type: none;}
#toc > ul > li {font-size: 11px; }
#toc > ul > li > ul {list-style-type: none; margin-top:8px;}
#toc > ul > li > ul > li {font-size: 11px; }
#toc > p {font-size: 13px; margin-left: 17px;}
.codeblock > p {margin-bottom: 3px; font-size: 11px;}
.codeblock > p > strong {margin-right: 10px; color: #222;}
.nav {font-size: 10px; margin-top: 20px; }
.nav > span {margin-right: 20px;}
.bottomspacer {height:100px;}
#header {width:100%; position: fixed; background-color: #111; height: 30px; z-index: 900;}
#header > p {color:#fff; font-size: 13px; padding-top: 6px; padding-left: 17px; }
#header > p > a {color:#fff; font-size: 13px; text-decoration: none; cursor:pointer; padding-right: 56px;}
.sectioncode {background-color: #f6f6f6; padding: 12px; margin-top: 18px;}
.sectioncode > h3 {margin-top: 0px; padding-bottom: 8px;}
hr { display: block; height: 1px; border: 0; border-top: 1px solid #eee; margin: 28px 0; padding: 0; }</style>
</head>

<body>

<div id="header">
<div style="width: 1006px;"></div>
<p><a href="../index.html">Flip Documentation Library</a><a href="../reference/index.html">Flip Reference</a></p>
</div>
<div id="toc">
<p>Flip Reference</p>
<ul>
<li><a href="../reference/Array.html">Array</a></li>
<li><a href="../reference/Array.iterator.html">Array::iterator</a></li>
<li><a href="../reference/array_iterator.html">array_iterator</a></li>
<li><a href="../reference/BackEndBinary.html">BackEndBinary</a></li>
<li><a href="../reference/BackEndIR.html">BackEndIR</a>	<ul>
	</ul>
</li>
<li><a href="../reference/BackEndMl.html">BackEndMl</a></li>
<li><a href="../reference/Blob.html">Blob</a></li>
<li><a href="../reference/Bool.html">Bool</a></li>
<li><a href="../reference/Class.html">Class</a></li>
<li><a href="../reference/Collection.html">Collection</a></li>
<li><a href="../reference/Collection.iterator.html">Collection::iterator</a></li>
<li><a href="../reference/collection_iterator.html">collection_iterator</a></li>
<li><a href="../reference/DataConsumerFile.html">DataConsumerFile</a></li>
<li><a href="../reference/DataConsumerMemory.html">DataConsumerMemory</a></li>
<li><a href="../reference/DataModel.html">DataModel</a></li>
<li><a href="../reference/DataProviderFile.html">DataProviderFile</a></li>
<li><a href="../reference/DataProviderMemory.html">DataProviderMemory</a></li>
<li><a href="../reference/Document.html">Document</a></li>
<li><a href="../reference/DocumentObserver.html">DocumentObserver</a></li>
<li><a href="../reference/DocumentServer.html">DocumentServer</a></li>
<li><a href="../reference/DocumentValidator.html">DocumentValidator</a></li>
<li><a href="../reference/Entity.html">Entity</a></li>
<li><a href="../reference/Enum.html">Enum</a></li>
<li><a href="../reference/EnumClass.html">EnumClass</a></li>
<li><a href="../reference/Float.html">Float</a></li>
<li><a href="../reference/History.html">History</a></li>
<li><a href="../reference/Hub.html">Hub</a></li>
<li><a href="../reference/Int.html">Int</a></li>
<li><a href="../reference/Message.html">Message</a></li>
<li><a href="../reference/Mold.html">Mold</a></li>
<li><a href="../reference/MulticastServiceExplorer.html">MulticastServiceExplorer</a></li>
<li><a href="../reference/MulticastServiceProvider.html">MulticastServiceProvider</a></li>
<li><a href="../reference/Object.html">Object</a></li>
<li><a href="../reference/ObjectRef.html">ObjectRef</a></li>
<li><a href="../reference/Optional.html">Optional</a></li>
<li><a href="../reference/Ref.html">Ref</a></li>
<li><a href="../reference/Signal.html">Signal</a></li>
<li><a href="../reference/String.html">String</a></li>
<li><a href="../reference/Transaction.html">Transaction</a></li>
<li><a href="../reference/Variant.html">Variant</a></li>
<li><a href="../reference/Vector.html">Vector</a></li>
</ul>
</div>

<div id="content">
<div class="nav" align="right">
<a href="BackEndBinary.html">previous</a><span>&nbsp;</span><a href="BackEndMl.html">next</a></div>

<h1>BackEndIR Class Reference</h1>

<table><tr><td><p>Declared in</p></td><td><p><code>flip/BackEndIR.h</code></p></td></tr>
</table>

<div class="codeblock"><table>
<tr><td><pre>class BackEndIR;</pre></td></tr>
</table></div>

<p><code>flip::BackEndIR</code> represents an intermediate representation of the document. Instead of directly to matching to flip class members, this objects holds class and attribute names as strings, allowing to modify this representation before it is fed to the document.</p>

<p>The object holds the full document in memory.</p>

<p>This class is used to :</p>

<ul>
<li>Read and write a document stored on a media</li>
<li>Convert from one revision of the document model to another one</li>
<li>Make the difference between two documents and make a transaction out of it,    which allows to produce 3-way merges</li>
</ul>

<h2>Member Types</h2>

<table><tr><td><p><code>Type</code></p></td><td><p>A generic flip Type representation</p></td></tr>
</table>

<h2>Member Functions Synopsys</h2>

<table><tr><td><p><a href="#member-function-constructor">Constructor</a></p></td><td><p>Constructs the <code>BackEndIR</code></p></td></tr>
<tr><td><p><a href="#member-function-destructor">Destructor</a></p></td><td><p>Destructs the <code>BackEndIR</code></p></td></tr>
<tr><td><p><code><a href="#member-function-clear">clear</a></code></p></td><td><p>Empty the representation</p></td></tr>
<tr><td><p><code><a href="#member-function-empty">empty</a></code></p></td><td><p>Returns <code>true</code> <em>iff</em> the representation is empty</p></td></tr>
</table>

<h3>BackEnd format to/from Intermediate Representation</h3>

<table><tr><td><p><code><a href="#member-function-register_backend">register_backend</a></code></p></td><td><p>Registers a concrete format backend for reading</p></td></tr>
<tr><td><p><code><a href="#member-function-read">read</a></code></p></td><td><p>Reads from the provider and fill this object. Returns <code>true</code> <em>iff</em> the operation was successful</p></td></tr>
<tr><td><p><code><a href="#member-function-write">write</a></code></p></td><td><p>Writes to the consumer using the specified backend in the template parameter</p></td></tr>
</table>

<h3>Intermediate Representation to/from Document</h3>

<table><tr><td><p><code><a href="#member-function-read">read</a></code></p></td><td><p>Reads from this object and fill the document</p></td></tr>
<tr><td><p><code><a href="#member-function-write">write</a></code></p></td><td><p>Writes to this object from the document</p></td></tr>
</table>

<h2>Member Variables Synopsys</h2>

<table><tr><td><p><code><a href="#member-variable-version">version</a></code></p></td><td><p>Version string as passed in the data model</p></td></tr>
<tr><td><p><code><a href="#member-variable-root">root</a></code></p></td><td><p>Variable representing the root of the whole document model tree</p></td></tr>
<tr><td><p><code><a href="#member-variable-member_names">member_names</a></code></p></td><td><p>Set of all member names in the document</p></td></tr>
<tr><td><p><code><a href="#member-variable-typenames">typenames</a></code></p></td><td><p>Set of all type names in the document</p></td></tr>
</table>

<h3>Type</h3>

<table><tr><td><p><code><a href="#member-variable-Type%3A%3Aref">Type::ref</a></code></p></td><td><p>Unique reference number of object</p></td></tr>
<tr><td><p><code><a href="#member-variable-Type%3A%3Atype_name">Type::type_name</a></code></p></td><td><p>Type name as declared in the data model</p></td></tr>
<tr><td><p><code><a href="#member-variable-Type%3A%3Amembers">Type::members</a></code></p></td><td><p>List of members of the object</p></td></tr>
<tr><td><p><code><a href="#member-variable-Type%3A%3Avalue">Type::value</a></code></p></td><td><p>Value of the object</p></td></tr>
<tr><td><p><code><a href="#member-variable-Type%3A%3Acollection">Type::collection</a></code></p></td><td><p>Elements of the collection</p></td></tr>
<tr><td><p><code><a href="#member-variable-Type%3A%3Aarray">Type::array</a></code></p></td><td><p>Elements of the array</p></td></tr>
</table>

<h2>Member Functions</h2>

<h3 id="member-function-constructor">Constructor</h3>
<div class="codeblock"><table>
<tr><td><pre>BackEndIR ();                       (1)</pre></td></tr>
<tr><td><pre>BackEndIR (const BackEndIR &amp; rhs);  (2)</pre></td></tr>
<tr><td><pre>BackEndIR (BackEndIR &amp;&amp; rhs);       (3)</pre></td></tr>
</table></div>

<ol>
<li>Default constructor. Constructs an empty representation</li>
<li>Copy constructor. Constructs as a copy of <code>rhs</code></li>
<li>Move constructor. Constructs by moving <code>rhs</code></li>
</ol>

<hr /><h3 id="member-function-destructor">Destructor</h3>
<div class="codeblock"><table>
<tr><td><pre>~BackEndIR ();</pre></td></tr>
</table></div>

<p>Destructor.</p>

<hr /><h3 id="member-function-clear"><code>clear</code></h3>
<div class="codeblock"><table>
<tr><td><pre>void  clear ();</pre></td></tr>
</table></div>

<p>Empty the representation.</p>

<hr /><h3 id="member-function-empty"><code>empty</code></h3>
<div class="codeblock"><table>
<tr><td><pre>bool  empty () const;</pre></td></tr>
</table></div>

<p>Returns <code>true</code> <em>iff</em> the representation is empty.</p>

<hr /><h3 id="member-function-register_backend"><code>register_backend</code></h3>
<div class="codeblock"><table>
<tr><td><pre>template &lt;class BackEnd&gt;</pre></td></tr>
<tr><td><pre>void  register_backend ();</pre></td></tr>
</table></div>

<p>Register a concrete format backend such as <a href="../reference/BackEndBinary.html"><code>BackEndBinary</code></a> or <a href="../reference/BackEndMl.html"><code>BackEndMl</code></a>. Registering will allow this object to guess the format of the backend and do proper parsing.</p>

<p>The subsequent call to <code>read</code> will use all backends registered to this object.</p>

<p>Example:</p>

<div class="codeblock"><table>
<tr><td><pre>// DataProviderMemory provider;</pre></td></tr>
<tr><td><pre></pre></td></tr>
<tr><td><pre>BackEndIR backend;</pre></td></tr>
<tr><td><pre>backend.register_backend &lt;BackEndBinary&gt; (); (1)</pre></td></tr>
<tr><td><pre>backend.read (provider);                     (2)</pre></td></tr>
</table></div>

<ol>
<li>Add <code>BackEndBinary</code> to the list of registered back end types to consider for reading</li>
<li>Read document given provider. In this case the backend will only use <code>BackEndBinary</code> for reading</li>
</ol>

<hr /><h3 id="member-function-read"><code>read</code></h3>
<div class="codeblock"><table>
<tr><td><pre>bool  read (DataProviderBase &amp; provider);</pre></td></tr>
</table></div>

<p>Reads from the provider and fill the intermediate representation of the document stored in this object.</p>

<p>Returns <code>true</code> <em>iff</em> the operation was successful.</p>

<p>See <a href="../reference/BackEndMl.html"><code>BackEndMl</code></a> or <a href="../reference/BackEndBinary.html"><code>BackEndBinary</code></a> for an example of use of this method.</p>

<hr /><h3 id="member-function-write"><code>write</code></h3>
<div class="codeblock"><table>
<tr><td><pre>template &lt;class BackEnd&gt;</pre></td></tr>
<tr><td><pre>void  write (DataConsumerBase &amp; consumer);</pre></td></tr>
</table></div>

<p>Writes the intermediate representation of the document to the consumer using the specified backend in the template parameter.</p>

<p>Example:</p>

<div class="codeblock"><table>
<tr><td><pre>// DataConsumerMemory consumer;</pre></td></tr>
<tr><td><pre></pre></td></tr>
<tr><td><pre>backend.write &lt;BackEndBinary&gt; (consumer);</pre></td></tr>
</table></div>

<p>See <a href="../reference/BackEndMl.html"><code>BackEndMl</code></a> or <a href="../reference/BackEndBinary.html"><code>BackEndBinary</code></a> for a more detailed example of use of this method.</p>

<hr /><h3 id="member-function-read"><code>read</code></h3>
<div class="codeblock"><table>
<tr><td><pre>void  read (DocumentBase &amp; document);</pre></td></tr>
</table></div>

<p>Reads from this object and fill the document. It will modify the document exactly as if executing a transaction. Changed made to the document should then be commited.</p>

<p>See <a href="../reference/BackEndMl.html"><code>BackEndMl</code></a> or <a href="../reference/BackEndBinary.html"><code>BackEndBinary</code></a> for an example of use of this method.</p>

<hr /><h3 id="member-function-write"><code>write</code></h3>
<div class="codeblock"><table>
<tr><td><pre>void  write (DocumentBase &amp; document);</pre></td></tr>
</table></div>

<p>Writes to this object from the document.</p>

<h2>Member Variables</h2>

<hr /><h3 id="member-variable-version"><code>version</code></h3>
<div class="codeblock"><table>
<tr><td><pre>std::string version;</pre></td></tr>
</table></div>

<p>This variable represents the version string as passed in the data model when declaring it.</p>

<hr /><h3 id="member-variable-root"><code>root</code></h3>
<div class="codeblock"><table>
<tr><td><pre>Type  root;</pre></td></tr>
</table></div>

<p>This variable represents the root of the whole document model tree.</p>

<p>Typically, converting a document to one model revision to another consists of manipulating the data stored in that tree. The members of <code>Type</code> are exposed below.</p>

<div class="codeblock"><table>
<tr><td><pre>class Type</pre></td></tr>
<tr><td><pre>{</pre></td></tr>
<tr><td><pre>public:</pre></td></tr>
<tr><td><pre>   Ref                                          ref;</pre></td></tr>
<tr><td><pre>   std::string                                  type_name;</pre></td></tr>
<tr><td><pre>   std::list &lt;std::pair &lt;std::string, Type&gt;&gt;    members;</pre></td></tr>
<tr><td><pre>   Value                                        value;</pre></td></tr>
<tr><td><pre>   std::map &lt;KeyRandom, Type&gt;                   collection;</pre></td></tr>
<tr><td><pre>   std::map &lt;KeyFloat, Type&gt;                    array;</pre></td></tr>
<tr><td><pre>};</pre></td></tr>
</table></div>

<p>The details of each variable members of type are exposed below.</p>

<hr /><h3 id="member-variable-member_names"><code>member_names</code></h3>
<div class="codeblock"><table>
<tr><td><pre>Names member_names;</pre></td></tr>
</table></div>

<p>This variable represents the set of all member names in the document. It is used by some backend format to provide symbolic compression of names.</p>

<hr /><h3 id="member-variable-typenames"><code>typenames</code></h3>
<div class="codeblock"><table>
<tr><td><pre>Names typenames;</pre></td></tr>
</table></div>

<p>This variable represents the set of all type names in the document. It is used by some backend format to provide symbolic compression of names.</p>

<hr /><h3 id="member-variable-Type%3A%3Aref"><code>Type::ref</code></h3>
<div class="codeblock"><table>
<tr><td><pre>Ref ref;</pre></td></tr>
</table></div>

<p>This variable represents the unique reference number of the object.</p>

<div class="warning"><p><strong>WARNING:</strong> When converting a document and adding a member to a flip class, caution should be taken for the reference number not to collide.</p></div>

<hr /><h3 id="member-variable-Type%3A%3Atype_name"><code>Type::type_name</code></h3>
<div class="codeblock"><table>
<tr><td><pre>std::string type_name;</pre></td></tr>
</table></div>

<p>This variable represents the type name as declared in the data model.</p>

<hr /><h3 id="member-variable-Type%3A%3Amembers"><code>Type::members</code></h3>
<div class="codeblock"><table>
<tr><td><pre>std::list &lt;std::pair &lt;std::string, Type&gt;&gt; members;</pre></td></tr>
</table></div>

<p><em>iff</em> the type represents a flip object, this variable represents the list of members of the object. The list itself is a <code>std::pair</code> which first element is the name of the member, and the second element a <code>Type</code>.</p>

<hr /><h3 id="member-variable-Type%3A%3Avalue"><code>Type::value</code></h3>
<div class="codeblock"><table>
<tr><td><pre>Value value;</pre></td></tr>
</table></div>

<p><em>iff</em> the type represents a flip basic type and not a container, this variable represents the value of the object. The <code>Value</code> type holds value for all basic types.</p>

<hr /><h3 id="member-variable-Type%3A%3Acollection"><code>Type::collection</code></h3>
<div class="codeblock"><table>
<tr><td><pre>std::map &lt;KeyRandom, Type&gt; collection;</pre></td></tr>
</table></div>

<p><em>iff</em> the type represents a collection, this variable represents the elements of the object.</p>

<div class="important"><p><strong>Important:</strong> For proper tracking of objects for document differentiation, the value of <code>KeyRandom</code> must not be changed.</p></div>

<hr /><h3 id="member-variable-Type%3A%3Aarray"><code>Type::array</code></h3>
<div class="codeblock"><table>
<tr><td><pre>std::map &lt;KeyFloat, Type&gt;  array;</pre></td></tr>
</table></div>

<p><em>iff</em> the type represents a array, this variable represents the elements of the object.</p>

<div class="important"><p><strong>Important:</strong> For proper tracking of objects for document differentiation, the value of <code>KeyFloat</code> must not be changed.</p></div>

<div class="nav" align="right">
<a href="BackEndBinary.html">previous</a><span>&nbsp;</span><a href="BackEndMl.html">next</a></div>

<div class="bottomspacer">&nbsp;</div>
</div>
</body>
</html>
