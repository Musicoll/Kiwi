language: cpp
dist: trusty
sudo: required
notifications:
  email: false

git:
  submodules: true
  depth: 3

matrix:
  include:
  - os: linux
    compiler: gcc
    addons:
      apt:
        sources:
        - ubuntu-toolchain-r-test
        packages:
        - g++-4.9
    before_install:
    - openssl aes-256-cbc -K $encrypted_5a43ff9033eb_key -iv $encrypted_5a43ff9033eb_iv
      -in travisci_rsa.enc -out travisci_rsa -d
    - chmod 0600 travisci_rsa
    - cp travisci_rsa ~/.ssh/id_rsa
    after_success:
        - sudo apt-get install --yes doxygen graphviz
        - rm -rf html
        - mkdir -p html
        - git clone -b gh-pages git@github.com:Musicoll/Kiwi.git --single-branch html
        - cd html
        - git rm -rf .
        - cd ../
        - doxygen Doxyfile
        - cd ../html
        - git add .
        - git commit -m "Automated documentation build."
        - git push origin gh-pages
        - cd ../
    env: COMPILER=g++-4.9

  - os: linux
    compiler: clang
    addons:
      apt:
        packages:
        - clang-3.6
        - libc++-dev
    env: COMPILER=clang++-3.6 CONFIGURATION=Debug

  - os: osx
    compiler: gcc
    env: COMPILER=g++-4.9

  - os: osx
    compiler: clang++
    env: COMPILER=clang++

script:
  - ls
